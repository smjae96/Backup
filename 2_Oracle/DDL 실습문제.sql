--1)
CREATE TABLE TB_PUBLISHER (
    PUB_NO VARCHAR2(5) CONSTRAINT PUBLISHER_PK PRIMARY KEY,
    PUB_NAME VARCHAR2(20) CONSTRAINT PUBLISHER_NN NOT NULL,
    PHONE VARCHAR2(13)
    );

COMMENT ON COLUMN TB_PUBLISHER.PUB_NO IS '출판사번호';   
COMMENT ON COLUMN TB_PUBLISHER.PUB_NAME IS '출판사명';
COMMENT ON COLUMN TB_PUBLISHER.PHONE IS '출판사전화번호';


INSERT INTO TB_PUBLISHER
VALUES ('P01', 'JAVA출판사', '010-1111-1111');

INSERT INTO TB_PUBLISHER
VALUES ('P02', 'ORACLE출판사', '010-2222-2222');

INSERT INTO TB_PUBLISHER
VALUES ('P03', 'KH출판사', '010-3333-3333');

--2)
CREATE TABLE TB_BOOK (
    BK_NO VARCHAR2(5) CONSTRAINT BOOK_PK PRIMARY KEY,
    BK_TITLE VARCHAR2(30) CONSTRAINT BOOK_NN_TITLE NOT NULL,
    BK_AUTHOR VARCHAR2(20) CONSTRAINT BOOK_NN_AUTHOR NOT NULL,
    BK_PRICE NUMBER,
    BK_PUB_NO VARCHAR2(5) CONSTRAINT BOOK_FK REFERENCES TB_PUBLISHER ON DELETE CASCADE
    );
    
    
COMMENT ON COLUMN TB_BOOK.BK_NO IS '도서번호';
COMMENT ON COLUMN TB_BOOK.BK_TITLE IS '도서명';
COMMENT ON COLUMN TB_BOOK.BK_AUTHOR IS '저자명';
COMMENT ON COLUMN TB_BOOK.PRICE IS '가격';
COMMENT ON COLUMN TB_BOOK.BK_PUB_NO IS '출판사 번호';

INSERT INTO TB_BOOK VALUES ('B01', '도서1', '저자1', 20000, 'P01');
INSERT INTO TB_BOOK VALUES ('B02', '도서2', '저자2', 19000, 'P02');
INSERT INTO TB_BOOK VALUES ('B03', '도서3', '저자3', 18000, 'P03');
INSERT INTO TB_BOOK VALUES ('B04', '도서4', '저자4', 33000, 'P01');
INSERT INTO TB_BOOK VALUES ('B05', '도서5', '저자5', 60000, 'P02');


--3)
CREATE TABLE TB_MEMBER (
    MEMBER_NO VARCHAR2(5) CONSTRAINT MEMBER_PK PRIMARY KEY,
    MEMBER_ID VARCHAR2(20) CONSTRAINT MEMBER_UQ UNIQUE,
    MEMBER_PWD VARCHAR2(20) CONSTRAINT MEMBER_NN_PWD NOT NULL,
    MEMBER_NAME VARCHAR2(20) CONSTRAINT MEMBER_NN_NAME NOT NULL,
    GENDER CHAR(1) CONSTRAINT MEMBER_CK_GEN CHECK(GENDER IN ('M' , 'F')),
    ADDRESS VARCHAR2(100),
    PHONE VARCHAR2(13),
    STATUS CHAR(1) DEFAULT 'N' CONSTRAINT MEMBER_CK_STA CHECK(STATUS IN ('Y' , 'N')),
    ENROLL_DATE  DATE DEFAULT SYSDATE CONSTRAINT MEMBER_NN_EN NOT NULL
    );
    
COMMENT ON COLUMN TB_MEMBER.MEMBER_NO IS '회원번호';   
COMMENT ON COLUMN TB_MEMBER.MEMBER_ID IS '아이디';
COMMENT ON COLUMN TB_MEMBER.MEMBER_PWD IS '비밀번호';
COMMENT ON COLUMN TB_MEMBER.MEMBER_NAME IS '회원명';
COMMENT ON COLUMN TB_MEMBER.GENDER IS '성별';
COMMENT ON COLUMN TB_MEMBER.ADDRESS IS '주소';
COMMENT ON COLUMN TB_MEMBER.PHONE IS '연락처';
COMMENT ON COLUMN TB_MEMBER.STATUS IS '탈퇴여부';
COMMENT ON COLUMN TB_MEMBER.ENROLL_DATE IS '가입일';

INSERT INTO TB_MEMBER
VALUES ('M01', 'abc01', 'abc01', '홍길동', 'M', '서울시 아무개구 아무개동',
        '010-1234-5678', 'Y', SYSDATE);
INSERT INTO TB_MEMBER
VALUES ('M21', 'abc02', 'abc02', '홍길순', 'F', '경기도 아무개구 아무개동',
        '010-9876-5678', 'N', '24/01/01');
INSERT INTO TB_MEMBER
VALUES ('M03', 'abc03', 'abc03', '홍길길', 'F', '부산시 아무개구 아무개동',
        '010-3333-5678', 'N', '23/10/10');       
INSERT INTO TB_MEMBER
VALUES ('M04', 'abc04', 'abc04', '심재윤', 'M', '뉴욕시 아무개구 아무개동',
        '010-6271-9615', 'N', '20/05/28');        
INSERT INTO TB_MEMBER  (MEMBER_NO, MEMBER_ID, MEMBER_PWD, MEMBER_NAME, 
                        GENDER, ADDRESS, PHONE)
VALUES ('M05', 'abc05', 'abc05', '류연우', 'M', '인천시 아무개구 아무개동',
        '010-1234-5678');
        
--4) 
CREATE TABLE TB_RENT (
    RENT_NO VARCHAR2(10) CONSTRAINT RENT_PK PRIMARY KEY,
    RENT_ME_NO VARCHAR2(5) CONSTRAINT RENT_FK_MEM REFERENCES TB_MEMBER ON DELETE SET NULL,
    RENT_BOOK_NO VARCHAR2(5) CONSTRAINT RENT_FK_BOOK REFERENCES TB_BOOK ON DELETE SET NULL,
    RENT_DATE DATE DEFAULT SYSDATE
    );
    
COMMENT ON COLUMN TB_RENT.RENT_NO IS '대여번호';
COMMENT ON COLUMN TB_RENT.RENT_ME_NO IS '대여회원번호';
COMMENT ON COLUMN TB_RENT.RENT_BOOK_NO IS '대여도서번호';
COMMENT ON COLUMN TB_RENT.RENT_DATE IS '대여일';


INSERT INTO TB_RENT
VALUES ('R01', 'M04', 'B01', '24/01/15');

INSERT INTO TB_RENT (RENT_NO, RENT_ME_NO, RENT_BOOK_NO)
VALUES ('R02', 'M05', 'B02');

INSERT INTO TB_RENT (RENT_NO, RENT_ME_NO, RENT_BOOK_NO)
VALUES ('R03', 'M21', 'B02');


SELECT * FROM TB_PUBLISHER;
SELECT * FROM TB_BOOK;
SELECT * FROM TB_MEMBER;
SELECT * FROM TB_RENT;

SELECT * FROM TB_MEMBER WHERE MEMBER_NAME = '류연우';
















        
        
        
        

